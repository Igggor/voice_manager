# В данной папке живёт голосовой помощник Sreda.

## Функции.
- [ ] Уведомления, таймеры, секундомер, заметки;
- [ ] Сценарии (группировка действий);
- [ ] Перевод текста;
- [ ] Логирование;
- [ ] Прогноз погоды, курс валют;
- [ ] (Перспектива) Произвольные запросы в интернет;
- [ ] (Перспектива) Воспроизведение музыки;
- [ ] (Перспектива) Взаимодействие с web-страницей;

## Особенности.
- [ ] Многие функции доступны без подключения к интернету;
- [ ] Скорость работы;
- [ ] Все используемые API - бесплатные или имеющие лимиты, которые при стандартном 
      использовании голосового ассистента недостижимы;

## "Раздел для разработчиков".
Обратите внимание, что тестирование не завершено, поэтому некоторые функции могут работать некорректно.

Все основные настройки хранятся в ``Sreda/settings.py``, также в папке ``Sreda/storage`` должен находиться ``.env``-файл 
с двумя полями: ``BUILD`` и ``WEATHER_API_KEY``.

### Установка.
Автивируйте ``venv``, а затем установите все необходимые пакеты: ``pip install -r requirements.txt``

### Организация файлов.
Рабочая папка - ``Sreda``.

* ``main.py`` - главный файл, откуда осуществляется запуск приложения.
* ``app.py`` - код приложения.
* ``settings.py`` - настройки приложения.
* В папке ``model`` хранится light-модель распознавания речи ``vosk``.
* В папке ``modules`` хранятся части приложения: календарь, работа с речью, текстом, перевод текста, логирование и т.д.
* В папке ``static`` хранятся константы и связанные с ними функции.
* В папке ``storage`` хранятся ``triggers.json`` - триггеры команд, ``.env``-файл и ``buffer`` - буфер с звуковыми файлами.

### Перед запуском:
- Подготовьте ``.env``-файл, установите ``BUILD = "True"``;
- Запустите ``main.py``. Дальше вариантов развития событий несколько:
    * Программа завершила работу и вы увидели сообщение примерно следующего содержания:
    ``Everything is up-to-date. You can set <BUILD> = False and restart the app.`` 
    Это значит, что всё ОК, вы можете перейти к следующему пункту.
    * Возникли какие-то ошибки. Стандартные ситуации:
      1. Не создан или неправильно заполнен ``.env``-файл.
      2. Вы добавили новую функцию (команду) и не указали в ``Sreda/storage/constants.py`` фразы-триггеры, 
         вызывающие эту команду.
      3. Ещё какие-то ситуации, не встретившиеся разработчикам. Если такое произошло, то стукайте разработчика(-ов).
    * Вы увидели сообщение что-то вроде: ``Building triggers started. Please wait, this process may take some time.``
      Этот процесс может занять довольно длительное время, от 5 до 40 минут. Просто оставьте в фоне и займитесь своими 
      делами. В конце концов вы увидите долгожданное: ``Warning: building of triggers finished successfully, 
      so you can set <BUILD> = False and restart the app.`` Всё ОК, и вы наконец-то можете перейти к следующему пункту.
- Измените поле ``BUILD`` на ``False`` и запустите ``main.py`` заново. 
- Теперь приложение работает в свом стандартном режиме.

Если вы не работали с функциями и командами, то выполнять все эти действия необязательно, 
но на всякий случай рекомендуется: вы просто убедитесь в том, что всё корректно.

#### Настоятельно рекомендуется сделать это перед сохранением изменений в репозиторий. 
